<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="author" content="Codecool" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Title</title>
    <!-- Latest compiled and minified CSS -->
    <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.3.1.js"></script>

    <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="/static/css/custom.css" />

</head>
<body>

<script src="https://www.paypalobjects.com/api/checkout.js"></script>
<script>
    paypal.Button.render({
        env: 'sandbox',
        client: {
            sandbox: 'AQWz_PI2Mz8X8GCHC75xR1wGnl6-7PKt0gHHzTj0zajdi87RiEyeniv0-OxGJX0YQPspHke8dNjuj4G8'
        },
        payment: function (data, actions) {
            return actions.payment.create({
                transactions: [{
                    amount: {
                        total: $("#totalPrice").text(),
                        currency: 'USD'
                    }
                }]
            });
        },
        onAuthorize: function (data, actions) {
            return actions.payment.execute()
                .then(function () {
                    window.alert('Thank you for your purchase!');
                });
        }
    }, '#paypal-button');
</script>

<div class="container">

    <div class="main">

        <div class="products">
            <div class="product" th:each="prod,iterStat : ${cartItems}">
                <div class="product-thumb" th:style="'background-image: url(/static/img/product_' + ${prod.id} + '.jpg'"></div>
                <div class="product-details">
                    <h5 class="product-name" th:text="${prod.getName()}"></h5>
                    <p class="product-info">
                        -&nbsp;
                        <span class="product-supplier" th:text="${prod.getSupplier().getName()}"></span>
                        <span class="product-product-category" th:text="${prod.getProductCategory().getName()}"></span>
                    </p>
                    <div class="product-buy">
                        <p class="product-price" th:text="${prod.getPrice()}"></p>
                        <span th:text="${prod.getShoppingCartQuantity()} + ' db'"></span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <span id="totalPrice" th:text="${totalPrice}">100 USD</span> USD
    <p>
        <div id="paypal-button"></div>
    </p>
</div>


</body>
</html>